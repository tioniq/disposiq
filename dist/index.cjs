"use strict";var S=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var Q=Object.getOwnPropertyNames;var G=Object.prototype.hasOwnProperty;var J=(e,o)=>{for(var s in o)S(e,s,{get:o[s],enumerable:!0})},V=(e,o,s,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of Q(o))!G.call(e,r)&&r!==s&&S(e,r,{get:()=>o[r],enumerable:!(t=M(o,r))||t.enumerable});return e};var X=e=>V(S({},"__esModule",{value:!0}),e);var l=(e,o,s)=>new Promise((t,r)=>{var N=d=>{try{w(s.next(d))}catch(g){r(g)}},U=d=>{try{w(s.throw(d))}catch(g){r(g)}},w=d=>d.done?t(d.value):Promise.resolve(d.value).then(N,U);w((s=s.apply(e,o)).next())});var te={};J(te,{AbortDisposable:()=>u,AsyncDisposableAction:()=>m,AsyncDisposiq:()=>a,BaseAsyncDisposable:()=>a,BaseDisposable:()=>i,BoolDisposable:()=>v,BooleanDisposable:()=>v,CompositeDisposable:()=>c,Disposable:()=>R,DisposableAction:()=>n,DisposableContainer:()=>x,DisposableStore:()=>c,Disposiq:()=>i,ObjectDisposedException:()=>P,SafeActionDisposable:()=>E,SafeAsyncActionDisposable:()=>z,SerialDisposable:()=>x,createDisposable:()=>W,createDisposableCompat:()=>O,createDisposiq:()=>B,disposableFromEvent:()=>K,disposableFromEventOnce:()=>H,disposeAll:()=>_,disposeAllSafe:()=>_,disposeAllUnsafe:()=>I,emptyDisposable:()=>p,isAsyncDisposableCompat:()=>k,isDisposable:()=>Z,isDisposableCompat:()=>L,isDisposableLike:()=>$,isSystemAsyncDisposable:()=>se,isSystemDisposable:()=>ee,on:()=>K,once:()=>H,safeDisposableExceptionHandlerManager:()=>j,toDisposable:()=>W,toDisposableCompat:()=>O,toDisposiq:()=>B,using:()=>oe});module.exports=X(te);"dispose"in Symbol||(Symbol.dispose=Symbol("Symbol.dispose"));"asyncDispose"in Symbol||(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));var i=class{[Symbol.dispose](){this.dispose()}},a=class extends i{[Symbol.asyncDispose](){return this.dispose()}};var u=class extends i{constructor(o){super(),this._controller=o}get disposed(){return this._controller.signal.aborted}get signal(){return this._controller.signal}dispose(){this._controller.abort()}};var f=Object.freeze(()=>{}),b=Object.freeze(()=>Promise.resolve());var n=class extends i{constructor(s){super();this._disposed=!1;this._action=typeof s=="function"?s:f}get disposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._action())}},m=class extends a{constructor(s){super();this._disposed=!1;this._action=typeof s=="function"?s:b}get disposed(){return this._disposed}dispose(){return l(this,null,function*(){this._disposed||(this._disposed=!0,yield this._action())})}};var T=class{constructor(o){this.value=o,this.next=null}},y=class{constructor(){this.head=null,this.tail=null,this.length=0}enqueue(o){let s=new T(o);this.head?(this.tail.next=s,this.tail=s):(this.head=s,this.tail=s),this.length++}dequeue(){let o=this.head;return o===null?null:(this.head=o.next,this.length--,o.value)}isEmpty(){return this.length===0}getHead(){var o,s;return(s=(o=this.head)==null?void 0:o.value)!=null?s:null}getLength(){return this.length}forEach(o){let s=this.head;for(;s!==null;)o(s.value),s=s.next}toArray(){let o=[],s=this.head;for(;s!==null;)o.push(s.value),s=s.next;return o}clear(){this.head=null,this.tail=null,this.length=0}};var h=class{constructor(o){this._scrap=new y,this._size=o}get size(){return this._size}set size(o){this._size=o}get all(){return this._scrap.toArray()}get full(){return this._scrap.length===this._size}lift(){return this._scrap.length>0?this._scrap.dequeue():null}throw(o){if(this._scrap.length<this._size)return this._scrap.enqueue(o),null;if(this._size===0)return o;let s=this._scrap.dequeue();return this._scrap.enqueue(o),s}clear(){this._scrap.clear()}};var D=new h(10);function _(e){let o=e.length;if(o===0)return;let s=D.lift();s===null?s=new Array(o):s.length<o&&(s.length=o);for(let t=0;t<o;t++)s[t]=e[t];e.length=0;for(let t=0;t<o;++t){let r=s[t];r&&(typeof r=="function"?r():r.dispose())}s.fill(void 0,0,o),D.full&&(D.size*=2),D.throw(s)}function I(e){for(let o=0;o<e.length;++o){let s=e[o];s&&(typeof s=="function"?s():s.dispose())}e.length=0}var c=class extends i{constructor(){super();this._disposed=!1;this._disposables=new Array}get disposed(){return this._disposed}add(...s){this.addAll(s)}addAll(s){if(!(!s||s.length===0)){if(this._disposed){for(let t of s)t&&(typeof t=="function"?t():t.dispose());return}for(let t=0;t<s.length;t++){let r=s[t];r&&this._disposables.push(typeof r=="function"?new n(r):r)}}}addOne(s){if(s){if(this._disposed){typeof s=="function"?s():s.dispose();return}typeof s=="function"&&(s=new n(s)),this._disposables.push(s)}}remove(s){let t=this._disposables.indexOf(s);return t===-1?!1:(this._disposables.splice(t,1),!0)}addTimeout(s,t){if(typeof s=="function"){let r=setTimeout(s,t);this.add(()=>clearTimeout(r));return}this.add(()=>clearTimeout(s))}addInterval(s,t){if(typeof s=="function"){let r=setInterval(s,t);this.add(()=>clearInterval(r));return}this.add(()=>clearInterval(s))}dispose(){this._disposed||(this._disposed=!0,I(this._disposables))}disposeCurrent(){_(this._disposables)}};var x=class extends i{constructor(s=void 0){super();this._disposed=!1;this._disposable=s}get disposed(){return this._disposed}get disposable(){return this._disposable}set(s){if(this._disposed){s.dispose();return}let t=this._disposable;this._disposable=s,t!=null&&t.dispose()}replace(s){if(this._disposed){s.dispose();return}this._disposable=s}disposeCurrent(){let s=this._disposable;s!=null&&(this._disposable=void 0,s.dispose())}dispose(){this._disposed||(this._disposed=!0,this._disposable!=null&&(this._disposable.dispose(),this._disposable=void 0))}};var v=class extends i{constructor(s=!1){super();this._disposed=!1;this._disposed=s}get disposed(){return this._disposed}dispose(){this._disposed=!0}};function K(e,o,s){return e.on(o,s),new n(()=>{e.off(o,s)})}function H(e,o,s){return e.once(o,s),new n(()=>{e.off(o,s)})}var F=Promise.resolve(),q=class extends a{dispose(){return F}[Symbol.dispose](){}[Symbol.asyncDispose](){return F}},Y=new q,p=Object.freeze(Y);function W(e){return e?typeof e=="function"?new n(e):typeof e!="object"?p:"dispose"in e?e:Symbol.dispose in e?new n(()=>{e[Symbol.dispose]()}):Symbol.asyncDispose in e?new m(()=>l(this,null,function*(){yield e[Symbol.asyncDispose]()})):"unref"in e?new n(()=>e.unref()):e instanceof AbortController?new u(e):p:p}function O(e){if(!e)return p;if(typeof e=="function")return new n(e);if(typeof e!="object")return p;let o="dispose"in e,s=Symbol.dispose in e;return o&&s?e:o?new n(()=>e.dispose()):s?new n(()=>e[Symbol.dispose]()):Symbol.asyncDispose in e?new n(()=>l(this,null,function*(){e[Symbol.asyncDispose]()})):"unref"in e?new n(()=>e.unref()):e instanceof AbortController?new u(e):p}function B(e){if(!e)return p;if(e instanceof i)return e;if(typeof e=="function")return new n(e);if(typeof e!="object")return p;let o="dispose"in e&&typeof e.dispose=="function",s=Symbol.dispose in e;return o&&s?new class extends i{dispose(){e.dispose()}[Symbol.dispose](){e[Symbol.dispose]()}}:o?new n(()=>e.dispose()):s?new n(()=>e[Symbol.dispose]()):Symbol.asyncDispose in e?new m(()=>l(this,null,function*(){yield e[Symbol.asyncDispose]()})):"unref"in e?new n(()=>e.unref()):e instanceof AbortController?new u(e):p}var R=class extends i{constructor(){super(...arguments);this._store=new c}get disposed(){return this._store.disposed}register(s){return this._store.addOne(s),s}addDisposable(s){this._store.addOne(s)}addDisposables(...s){this._store.addAll(s)}dispose(){this._store.dispose()}};var P=class extends Error{constructor(o){super(o||"Object disposed")}};i.prototype.disposeWith=function(e){return e.add(this)};function Z(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"}function $(e){return typeof e=="function"||typeof e=="object"&&e!==null&&typeof e.dispose=="function"}function L(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&typeof e[Symbol.dispose]=="function"}function k(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&typeof e[Symbol.asyncDispose]=="function"}function ee(e){return typeof e=="object"&&e!==null&&typeof e[Symbol.dispose]=="function"}function se(e){return typeof e=="object"&&e!==null&&typeof e[Symbol.asyncDispose]=="function"}var A=class{constructor(o){this._handler=this._defaultHandler=typeof o=="function"?o:f}get handler(){return this._handler}set handler(o){this._handler=typeof o=="function"?o:this._defaultHandler}reset(){this._handler=this._defaultHandler}handle(o){this._handler(o)}handleSafe(o){try{this.handle(o)}catch(s){}}};var j=new A,E=class extends i{constructor(s){super();this._disposed=!1;this._action=typeof s=="function"?s:f}get disposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;try{this._action()}catch(s){j.handle(s)}}}},z=class extends a{constructor(s){super();this._disposed=!1;this._action=typeof s=="function"?s:b}get disposed(){return this._disposed}dispose(){return l(this,null,function*(){if(!this._disposed){this._disposed=!0;try{yield this._action()}catch(s){j.handle(s)}}})}};function oe(e,o){let s;try{s=o(e)}catch(t){return C(e,()=>{throw t})}return s instanceof Promise?s.then(t=>C(e,()=>t)).catch(t=>C(e,()=>{throw t})):C(e,()=>s)}function C(e,o){let s=e.dispose();return s instanceof Promise?s.then(o):o()}0&&(module.exports={AbortDisposable,AsyncDisposableAction,AsyncDisposiq,BaseAsyncDisposable,BaseDisposable,BoolDisposable,BooleanDisposable,CompositeDisposable,Disposable,DisposableAction,DisposableContainer,DisposableStore,Disposiq,ObjectDisposedException,SafeActionDisposable,SafeAsyncActionDisposable,SerialDisposable,createDisposable,createDisposableCompat,createDisposiq,disposableFromEvent,disposableFromEventOnce,disposeAll,disposeAllSafe,disposeAllUnsafe,emptyDisposable,isAsyncDisposableCompat,isDisposable,isDisposableCompat,isDisposableLike,isSystemAsyncDisposable,isSystemDisposable,on,once,safeDisposableExceptionHandlerManager,toDisposable,toDisposableCompat,toDisposiq,using});
//# sourceMappingURL=index.cjs.map