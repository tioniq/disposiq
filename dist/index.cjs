"use strict";var T=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var Q=Object.prototype.hasOwnProperty;var G=(s,o)=>{for(var e in o)T(s,e,{get:o[e],enumerable:!0})},J=(s,o,e,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of M(o))!Q.call(s,i)&&i!==e&&T(s,i,{get:()=>o[i],enumerable:!(t=U(o,i))||t.enumerable});return s};var V=s=>J(T({},"__esModule",{value:!0}),s);var l=(s,o,e)=>new Promise((t,i)=>{var B=a=>{try{g(e.next(a))}catch(w){i(w)}},N=a=>{try{g(e.throw(a))}catch(w){i(w)}},g=a=>a.done?t(a.value):Promise.resolve(a.value).then(B,N);g((e=e.apply(s,o)).next())});var pe={};G(pe,{AbortDisposable:()=>d,AsyncDisposableAction:()=>f,AsyncDisposiq:()=>p,BaseDisposable:()=>r,BoolDisposable:()=>v,BooleanDisposable:()=>v,CompositeDisposable:()=>m,Disposable:()=>K,DisposableAction:()=>n,DisposableContainer:()=>x,DisposableStore:()=>m,Disposiq:()=>r,ObjectDisposedException:()=>j,SafeActionDisposable:()=>H,SafeAsyncActionDisposable:()=>F,SerialDisposable:()=>x,createDisposable:()=>E,createDisposableCompat:()=>z,disposableFromEvent:()=>R,disposableFromEventOnce:()=>q,disposeAll:()=>b,disposeAllSafe:()=>Y,disposeAllUnsafe:()=>I,emptyDisposable:()=>c,isAsyncDisposableCompat:()=>te,isDisposable:()=>ee,isDisposableCompat:()=>oe,isDisposableLike:()=>se,isSystemAsyncDisposable:()=>re,isSystemDisposable:()=>ie,on:()=>Z,once:()=>$,safeDisposableExceptionHandlerManager:()=>W,toDisposable:()=>L,toDisposableCompat:()=>k,using:()=>ne});module.exports=V(pe);"dispose"in Symbol||(Symbol.dispose=Symbol("Symbol.dispose"));"asyncDispose"in Symbol||(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));var r=class{[Symbol.dispose](){this.dispose()}},p=class extends r{[Symbol.asyncDispose](){return this.dispose()}};var d=class extends r{constructor(o){super(),this._controller=o}get disposed(){return this._controller.signal.aborted}get signal(){return this._controller.signal}dispose(){this._controller.abort()}};var u=Object.freeze(()=>{}),h=Object.freeze(()=>Promise.resolve());var n=class extends r{constructor(e){super();this._disposed=!1;this._action=typeof e=="function"?e:u}get disposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._action())}},f=class extends p{constructor(e){super();this._disposed=!1;this._action=typeof e=="function"?e:h}get disposed(){return this._disposed}dispose(){return l(this,null,function*(){this._disposed||(this._disposed=!0,yield this._action())})}};var S=class{constructor(o){this.value=o,this.next=null}},y=class{constructor(){this.head=null,this.tail=null,this.length=0}enqueue(o){let e=new S(o);this.head?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),this.length++}dequeue(){let o=this.head;return o===null?null:(this.head=o.next,this.length--,o.value)}isEmpty(){return this.length===0}getHead(){var o,e;return(e=(o=this.head)==null?void 0:o.value)!=null?e:null}getLength(){return this.length}forEach(o){let e=this.head;for(;e!==null;)o(e.value),e=e.next}toArray(){let o=[],e=this.head;for(;e!==null;)o.push(e.value),e=e.next;return o}clear(){this.head=null,this.tail=null,this.length=0}};var D=class{constructor(o){this._scrap=new y,this._size=o}get size(){return this._size}set size(o){this._size=o}get all(){return this._scrap.toArray()}get full(){return this._scrap.length===this._size}lift(){return this._scrap.length>0?this._scrap.dequeue():null}throw(o){if(this._scrap.length<this._size)return this._scrap.enqueue(o),null;if(this._size===0)return o;let e=this._scrap.dequeue();return this._scrap.enqueue(o),e}clear(){this._scrap.clear()}};var _=new D(10);function b(s){let o=s.length;if(o===0)return;let e=_.lift();e===null?e=new Array(o):e.length<o&&(e.length=o);for(let t=0;t<o;t++)e[t]=s[t];s.length=0;for(let t=0;t<o;++t){let i=e[t];i&&(typeof i=="function"?i():i.dispose())}e.fill(void 0,0,o),_.full&&(_.size*=2),_.throw(e)}function I(s){for(let o=0;o<s.length;++o){let e=s[o];e&&(typeof e=="function"?e():e.dispose())}s.length=0}var m=class extends r{constructor(){super();this._disposed=!1;this._disposables=new Array}get disposed(){return this._disposed}add(...e){this.addAll(e)}addAll(e){if(!(!e||e.length===0)){if(this._disposed){for(let t of e)t&&(typeof t=="function"?t():t.dispose());return}for(let t=0;t<e.length;t++){let i=e[t];i&&this._disposables.push(typeof i=="function"?new n(i):i)}}}addOne(e){if(e){if(this._disposed){typeof e=="function"?e():e.dispose();return}typeof e=="function"&&(e=new n(e)),this._disposables.push(e)}}remove(e){let t=this._disposables.indexOf(e);return t===-1?!1:(this._disposables.splice(t,1),!0)}addTimeout(e,t){if(typeof e=="function"){let i=setTimeout(e,t);this.add(()=>clearTimeout(i));return}this.add(()=>clearTimeout(e))}addInterval(e,t){if(typeof e=="function"){let i=setInterval(e,t);this.add(()=>clearInterval(i));return}this.add(()=>clearInterval(e))}dispose(){this._disposed||(this._disposed=!0,I(this._disposables))}disposeCurrent(){b(this._disposables)}};var x=class extends r{constructor(e=void 0){super();this._disposed=!1;this._disposable=e}get disposed(){return this._disposed}get disposable(){return this._disposable}set(e){if(this._disposed){e.dispose();return}let t=this._disposable;this._disposable=e,t!=null&&t.dispose()}replace(e){if(this._disposed){e.dispose();return}this._disposable=e}disposeCurrent(){let e=this._disposable;e!=null&&(this._disposable=void 0,e.dispose())}dispose(){this._disposed||(this._disposed=!0,this._disposable!=null&&(this._disposable.dispose(),this._disposable=void 0))}};var v=class extends r{constructor(e=!1){super();this._disposed=!1;this._disposed=e}get disposed(){return this._disposed}dispose(){this._disposed=!0}};function R(s,o,e){return s.on(o,e),new n(()=>{s.off(o,e)})}function q(s,o,e){return s.once(o,e),new n(()=>{s.off(o,e)})}var O=Promise.resolve(),P=class extends p{dispose(){return O}[Symbol.dispose](){}[Symbol.asyncDispose](){return O}},X=new P,c=Object.freeze(X);function E(s){if(!s)return c;if(typeof s=="function")return new n(s);if(typeof s=="object"){if("dispose"in s)return s;if(Symbol.dispose in s)return new n(()=>{let o=s[Symbol.dispose];o()});if(Symbol.asyncDispose in s)return new f(()=>l(this,null,function*(){let o=s[Symbol.asyncDispose];yield o()}));if("unref"in s)return new n(()=>s.unref());if(s instanceof AbortController)return new d(s)}return c}function z(s){if(!s)return c;if(typeof s=="function")return new n(s);if(typeof s=="object"){let o="dispose"in s,e=Symbol.dispose in s;if(o&&e)return s;if(o)return new n(()=>s.dispose());if(e)return new n(()=>s[Symbol.dispose]());if(Symbol.asyncDispose in s)return new n(()=>l(this,null,function*(){s[Symbol.asyncDispose]()}));if("unref"in s)return new n(()=>s.unref());if(s instanceof AbortController)return new d(s)}return c}var Y=b,Z=R,$=q,L=E,k=z;var K=class extends r{constructor(){super(...arguments);this._store=new m}get disposed(){return this._store.disposed}register(e){return this._store.addOne(e),e}addDisposable(e){this._store.addOne(e)}addDisposables(...e){this._store.addAll(e)}dispose(){this._store.dispose()}};var j=class extends Error{constructor(o){super(o||"Object disposed")}};r.prototype.disposeWith=function(s){return s.add(this)};function ee(s){return typeof s=="object"&&s!==null&&typeof s.dispose=="function"}function se(s){return typeof s=="function"||typeof s=="object"&&s!==null&&typeof s.dispose=="function"}function oe(s){return typeof s=="object"&&s!==null&&typeof s.dispose=="function"&&typeof s[Symbol.dispose]=="function"}function te(s){return typeof s=="object"&&s!==null&&typeof s.dispose=="function"&&typeof s[Symbol.asyncDispose]=="function"}function ie(s){return typeof s=="object"&&s!==null&&typeof s[Symbol.dispose]=="function"}function re(s){return typeof s=="object"&&s!==null&&typeof s[Symbol.asyncDispose]=="function"}var A=class{constructor(o){this._handler=this._defaultHandler=typeof o=="function"?o:u}get handler(){return this._handler}set handler(o){this._handler=typeof o=="function"?o:this._defaultHandler}reset(){this._handler=this._defaultHandler}handle(o){this._handler(o)}handleSafe(o){try{this.handle(o)}catch(e){}}};var W=new A,H=class extends r{constructor(e){super();this._disposed=!1;this._action=typeof e=="function"?e:u}get disposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;try{this._action()}catch(e){W.handle(e)}}}},F=class extends p{constructor(e){super();this._disposed=!1;this._action=typeof e=="function"?e:h}get disposed(){return this._disposed}dispose(){return l(this,null,function*(){if(!this._disposed){this._disposed=!0;try{yield this._action()}catch(e){W.handle(e)}}})}};function ne(s,o){let e;try{e=o(s)}catch(t){return C(s,()=>{throw t})}return e instanceof Promise?e.then(t=>C(s,()=>t)).catch(t=>C(s,()=>{throw t})):C(s,()=>e)}function C(s,o){let e=s.dispose();return e instanceof Promise?e.then(o):o()}0&&(module.exports={AbortDisposable,AsyncDisposableAction,AsyncDisposiq,BaseDisposable,BoolDisposable,BooleanDisposable,CompositeDisposable,Disposable,DisposableAction,DisposableContainer,DisposableStore,Disposiq,ObjectDisposedException,SafeActionDisposable,SafeAsyncActionDisposable,SerialDisposable,createDisposable,createDisposableCompat,disposableFromEvent,disposableFromEventOnce,disposeAll,disposeAllSafe,disposeAllUnsafe,emptyDisposable,isAsyncDisposableCompat,isDisposable,isDisposableCompat,isDisposableLike,isSystemAsyncDisposable,isSystemDisposable,on,once,safeDisposableExceptionHandlerManager,toDisposable,toDisposableCompat,using});
//# sourceMappingURL=index.cjs.map